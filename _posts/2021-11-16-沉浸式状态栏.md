---
layout: post
title: 沉浸式状态栏
date: 2021-11-15
Author: aixz
categories:
tags: [笔记, Android,状态栏]
comments: true 
---

### Android 沉浸式状态栏设置

# 沉浸式状态栏的兼容情况

| Android版本 | 透明状态栏 |
| ----------- | ---------- |
| <4.4        | ×          |
| 4.4-5.0     | ✓          |
| >=5.0       | ✓          |

| Android版本 | 黑白字符状态栏 |
| ----------- | -------------- |
| <6.0        | ×              |
| >=6.0       | ✓              |



# fitsSystemWindows 标志

> Boolean internal attribute to adjust view layout based on system windows such as the status bar. If true, adjusts the padding of this view to leave space for the system windows. Will only take effect if this view is in a non-embedded activity.
>
> <View android:fitsSystemWindows="true"></View>

fitsSystemWindows只能在4.4及以上才能生效，默认为false,且只有在设置透明导航栏或者状态栏才生效，view会预留一部分空间，并且该标志仅在非嵌入Activity中生效。这个也好理解，最外围Activity才需要适配状态栏。

> 主题设置：<item name="android:windowTranslucentStatus">true</item>
>
> if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {    	
>
> ​      window.addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS)
>
> }

以上状态栏会变为透明，在View上设置该标志会预留状态栏高度的空间，即paddingTop=statusHeight。



> <item name="android:windowTranslucentNavigation">true</item> 
>
>  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {    				
>
> ​		getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION); 
>
> }

以上底部导航栏会变为透明，在View上设置该标志会预留导航栏高度的空间，即paddingBottom=navigationHeight
